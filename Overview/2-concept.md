## 基本概念

然后说一说上一小节我们做了什么。

我们知道面对对象的编程语言在处理关系型数据库的时候有个很大的优势，那就是很容易的把数据库中的一个表和程序中的一个对象来对应起来。通过这种关系映射能够很轻松的对数据库进行操作。

我们知道Sun公司最厉害的地方不在于写出了什么什么软件，赚了多少钱，而是他们善于提出各种理论，制定各种规范，让整个Java生态环境保持良好的发展。

- 为了统一Java连接各种关系型数据库的API，Sun提出了JDBC这个标准
- 后来随着ORM理论的发展，Sun提出了JPA这个规范，类似于JDBC。大家可以到<https://www.objectdb.com/api/java/jpa>这里简单的看看规范长什么样子
- Spring Data JPA 是 JPA的一种优秀实现



我们在一个普通的Java对象上添加`@Entity`这个注解之后，Spring Boot就会把它和数据库中的一个表对应起来。在程序运行的时候**自动的生成对应的SQL语句，帮我们在数据库中创建对应的表**。

``` java
@Documented
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface Entity {
    String name() default "";
}
```



之前我们开发的时候可能都是先把数据库的库表结构写好，然后再在Java代码中创建相关的对象。但是JPA的思想不一样，我们先在代码中创建相关的对象，然后生成对应的数据库的结构，算是一种领域建模的设计思维。



然后记得我们在`application.yml`中添加的`spring.jpa.hibernate.ddl-auto`这个字段吗？这个字段有下面几个可选的值

- `update`: 如果设置为这个值，那么当我们实体对象发生变化后，Spring Boot自动帮我们修改数据库的表。但是不会删除以及存在的数据和字段。
- `create`: 每次重启程序的时候删除之前的表，重新创建。在线上环境千万不能使用这个属性！！

接下来为了调试方便，请读者把这个值设置为 `create`.



然后我们知道，在直接使用数据库的时候我们不一定要给每个表设置一个 primary key。但是在JPA中，可能是为了统一规范，它要求每个表都要有一个primary key。我们在上面的代码中用 `@Id`这个注解标注了id这个字段。就是告诉Spring Boot把这个字段设置为primary key，如果没有的话会报错。



然后我们知道，Java中的数据类型和数据库中的数据类型是没有一一对应的。

- Java中的Long类型被转换成数据库中的`bigint(20)`
- Java中的String类型被转化我数据库中的`varchar(255)`

- 默认情况下运行字段的值为空
- 。。。。

上面的是基本的默认规则。这个的规则很多，但是没必要死记硬背，简单了解下就行了。



我看市面上很多教程，包括官方文档，都是从Spring Data JPA出发开讲解它能做什么，我觉得这样不好。

JPA的核心思想就是使用ORM映射代替SQL查询语句，然后用JPA的风格来写。所以接下来我会和大家一起，把常用的SQL语句翻译成JPA风格的写法。



